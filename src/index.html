<!doctype html>
<html class="no-js" lang="">

<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title></title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="manifest" href="site.webmanifest">
  <link rel="apple-touch-icon" href="icon.png">
  <!-- Place favicon.ico in the root directory -->

  <link rel="stylesheet" href="css/normalize.css">
  <link rel="stylesheet" href="css/main.css">
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->

  <!-- Add your site or application content here -->
  <div id="canvas_div">
    <!-- <canvas id="myCanvas" width="1920" height="1080"></canvas> -->
    <svg width="650" height="280"></svg>
  </div>
  <div id="sidebar">
    <button id="circle_button" class="sidebar_button">Add Circle</button><br>
    <button id="rectangle_button" class="sidebar_button">Add Rectangle</button><br>
    <button id="triangle_button" class="sidebar_button">Add Triangle</button><br>
    <button id="polygon_button" class="sidebar_button">Add Custom Polygon</button><br>
  </div>
  <div id="slider_div">
    <input type="range" min="1" max="100" value="50" class="slider" id="myRange">
  </div>
  <div id="buttons">
    <button id="pos_button" class="button">Set Position</button>
    <button id="col_button" class="button">Set Color</button>
  </div>
  <script src="js/vendor/modernizr-{{MODERNIZR_VERSION}}.min.js"></script>
  <script src="https://code.jquery.com/jquery-{{JQUERY_VERSION}}.min.js" integrity="{{JQUERY_SRI_HASH}}" crossorigin="anonymous"></script>
  <script>window.jQuery || document.write('<script src="js/vendor/jquery-{{JQUERY_VERSION}}.min.js"><\/script>')</script>
  <script src="js/plugins.js"></script>
  <script src="js/main.js"></script>

  <!-- Google Analytics: change UA-XXXXX-Y to be your site's ID. -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-XXXXX-Y', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

  <script src="https://d3js.org/d3.v5.min.js"></script>
  <script>

    var svg = d3.select("svg"),
      width = +svg.attr("width"),
      height = +svg.attr("height"),
      radius = 32;

    var rectWidth = 30,
      rectHeight = 30;

    // var circles = d3.range(20).map(function () {
    //   return {
    //     x: Math.round(Math.random() * (width - radius * 2) + radius),
    //     y: Math.round(Math.random() * (height - radius * 2) + radius)
    //   };
    // });

    var circles = [];
    var rectangles = [];

    function addCircle() {
      circles.push({
        x: Math.round(Math.random() * (width - radius * 2) + radius),
        y: Math.round(Math.random() * (height - radius * 2) + radius),
        r: radius
      })
      render();
    }

    function addRect() {
      rectangles.push({
        x: Math.round(Math.random() * (width - rectWidth * 2) + rectWidth),
        y: Math.round(Math.random() * (height - rectHeight * 2) + rectHeight),
        w: rectWidth,
        h: rectHeight
      })
      render();
    }

    var circleBtn = document.getElementById("circle_button");
    circleBtn.addEventListener("click", addCircle);

    var rectBtn = document.getElementById("rectangle_button");
    rectBtn.addEventListener("click", addRect);

    var color = d3.scaleOrdinal(d3.schemeCategory10);

    function render() {
      svg.selectAll("circle")
        .data(circles)
        .enter()
        .append("circle")
        .attr("cx", function (d) { return d.x; })
        .attr("cy", function (d) { return d.y; })
        .attr("r", function (d) { return d.r; })
        .style("fill", function (d, i) { return color(i); })
        .call(d3.drag()
          .on("start", dragstarted)
          .on("drag", circleDragged)
          .on("end", dragended));

      svg.selectAll("rect")
        .data(rectangles)
        .enter()
        .append("rect")
        .attr("x", function (d) { return d.x; })
        .attr("y", function (d) { return d.y; })
        .attr("width", function (d) { return d.w; })
        .attr("height", function (d) { return d.h; })
        .style("fill", function (d, i) { return color(i); })
        .call(d3.drag()
          .on("start", dragstarted)
          .on("drag", rectDragged)
          .on("end", dragended));
    }

    function dragstarted(d) {
      d3.select(this).raise().classed("active", true);
    }

    function circleDragged(d) {
      d3.select(this).attr("cx", d.x = d3.event.x).attr("cy", d.y = d3.event.y);
    }

    function rectDragged(d) {
      d3.select(this).attr("x", d.x = d3.event.x).attr("y", d.y = d3.event.y);
    }

    function dragended(d) {
      d3.select(this).classed("active", false);
    }

    render();

  </script>

</body>

</html>

<style>
  .slider_div {
    width: 100%;
    /* Width of the outside container */
  }

  /* The slider itself */
  .slider {
    -webkit-appearance: none;
    /* Override default CSS styles */
    appearance: none;
    width: 100%;
    /* Full-width */
    height: 25px;
    /* Specified height */
    background: #d3d3d3;
    /* Grey background */
    outline: none;
    /* Remove outline */
    opacity: 0.7;
    /* Set transparency (for mouse-over effects on hover) */
    -webkit-transition: .2s;
    /* 0.2 seconds transition on hover */
    transition: opacity .2s;
  }

  /* Mouse-over effects */
  .slider:hover {
    opacity: 1;
    /* Fully shown on mouse-over */
  }

  /* The slider handle (use -webkit- (Chrome, Opera, Safari, Edge) and -moz- (Firefox) to override default look) */
  .slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    /* Override default look */
    appearance: none;
    width: 25px;
    /* Set a specific slider handle width */
    height: 25px;
    /* Slider handle height */
    background: #4CAF50;
    /* Green background */
    cursor: pointer;
    /* Cursor on hover */
  }

  .slider::-moz-range-thumb {
    width: 25px;
    /* Set a specific slider handle width */
    height: 25px;
    /* Slider handle height */
    background: #4CAF50;
    /* Green background */
    cursor: pointer;
    /* Cursor on hover */
  }
</style>
